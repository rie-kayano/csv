<!DOCTYPE html>
<html lang="ja">
<head>
  <meta http-equiv="Contents-Type" content="text/html" charset="UTF-8">
  <link rel="stylesheet" href="style.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

  
  <script>
    //-----初期設定
function initFunc(){
  selectArray = [-1,-1,-1,-1,-1];
  scoreArray = [0,0,0,0,0];
  qNum = selectArray.length;
}

function preloadFunc() {
  for(var i = 0; i< arguments.length; i++){
    $("<img>").attr("src", arguments[i]);
  }
}

function againFunc(){
  moveFunc(-1);
  for (var i in selectArray){
    var selectID = selectArray[i];
    $("#" + i + "_" + selectID).removeClass("selected");
  }
  initFunc();//---初期化
}

function quesFunc(){
  var idArray = this.id.split("_");
  var qID = Number(idArray[0]);
  var ansID = Number(idArray[1]);
  var selectID = selectArray[qID];
  if (ansID == selectID) return;
  $("#" + qID + "_" + ansID).addClass("selected");
  $("#" + qID + "_" + selectID).removeClass("selected");
  selectArray[qID] = ansID;
  moveFunc(qID);

  scoreArray[qID] =  Number($(this).attr("sc"));
  if (qID+1 >= qNum) resultFunc();
}

function resultFunc(){
  var totalScore = 0;
  for(var i in scoreArray){
    totalScore += scoreArray[i];
  }

  switch (true){
    case totalScore >= 80:
      var lv = 4;
      break;
    case totalScore >= 60:
      var lv = 3;
      break;
    case totalScore >= 40:
      var lv = 2;
      break;
    case totalScore >= 20:
      var lv = 1;
      break;
    default:
      var lv = 0;
  }
  $("#resultPoint").text(totalScore);
  $("#resultImage").css("background-image", "url('images/lv"+lv+".png')");
  var myData = resultArray[lv];
  $("#resultTitle").text(myData.split(",")[0]);
  $("#resultText").text(myData.split(",")[1]);
}

function moveFunc(vol){
  var myPos = (vol+1) * -650;
  $("#qContainer").delay(500).animate({left: myPos},500);
}

$(function(){
  initFunc();//---初期化
  $.get("",function(myData){resultArray = myData.split("\n")});
  preloadFunc("images/lv0.png","images/lv1.png","images/lv2.png","images/lv3.png","images/lv4.png", "images/againOn.png");
  $("ul>li").click(quesFunc);
  $("#againButton").click(againFunc);
});


  </script>
  
  <title>診断メーカー作成中</title>
</head>
<body>
  
  <div id="qArea">
    <div id="qContainer">
  
      <div class="qBox">
        <div class="ques"><span class="qNum">Q1</span>質問１やで?</div>
        <ul>
           <li id="0_0" sc="20">質問０aaaaaaaaaaaa</li>
           <li id="0_1" sc="15">質問１iiiiiiiiiiii</li>
           <li id="0_2" sc="10">質問２uuuuuuuuuuuu</li>
           <li id="0_3" sc="5">質問３eeeeeeeeeeee</li>
           <li id="0_4" sc="0">質問４oooooooooooo</li>
        </ul>
        <div class="fig"><img src="images/fig0.png" width="240" height="260" alt=""></div>
      </div>
      
      
      
      <div class="qBox">
        <div class="ques"><span class="qNum">Q2</span>質問２やで?</div>
        <ul>
          <li id="1_0" sc="20">質問０aaaaaaaaaaaa</li>
          <li id="1_1" sc="15">質問１iiiiiiiiiiii</li>
          <li id="1_2" sc="10">質問２uuuuuuuuuuuu</li>
          <li id="1_3" sc="5">質問３eeeeeeeeeeee</li>
          <li id="1_4" sc="0">質問４oooooooooooo</li>
        </ul>
        <div class="fig"><img src="images/fig1.png" width="240" height="260" alt=""></div>
      </div>
      
      
      
      <div class="qBox">
        <div class="ques"><span class="qNum">Q3</span>質問３やで?</div>
        <ul>
          <li id="2_0" sc="20">質問０aaaaaaaaaaaa</li>
          <li id="2_1" sc="15">質問１iiiiiiiiiiii</li>
          <li id="2_2" sc="10">質問２uuuuuuuuuuuu</li>
          <li id="2_3" sc="5">質問３eeeeeeeeeeee</li>
          <li id="2_4" sc="0">質問４oooooooooooo</li>
        </ul>
        <div class="fig"><img src="images/fig2.png" width="240" height="260" alt=""></div>
      </div>
      
      
      
      <div class="qBox">
        <div class="ques"><span class="qNum">Q4</span>質問４やで?</div>
        <ul>
          <li id="3_0" sc="20">質問０aaaaaaaaaaaa</li>
          <li id="3_1" sc="15">質問１iiiiiiiiiiii</li>
          <li id="3_2" sc="10">質問２uuuuuuuuuuuu</li>
          <li id="3_3" sc="5">質問３eeeeeeeeeeee</li>
          <li id="3_4" sc="0">質問４oooooooooooo</li>
        </ul>
        <div class="fig"><img src="images/fig3.png" width="240" height="260" alt=""></div>
      </div>
      
      
      
      <div class="qBox">
        <div class="ques"><span class="qNum">Q5</span>質問５やで?</div>
        <ul>
          <li id="4_0" sc="20">質問０aaaaaaaaaaaa</li>
          <li id="4_1" sc="15">質問１iiiiiiiiiiii</li>
          <li id="4_2" sc="10">質問２uuuuuuuuuuuu</li>
          <li id="4_3" sc="5">質問３eeeeeeeeeeee</li>
          <li id="4_4" sc="0">質問４oooooooooooo</li>
        </ul>
        <div class="fig"><img src="images/fig4.png" width="240" height="260" alt=""></div>
      </div>

      <div class="qBox">
				<div id="resultBox">
					<div id="resultTitle">実業家級サラリーマン</div>
					<div id="resultPoint">15</div>
					<div id="resultLeft">
						<div id="resultText">実業家級サラリーマンの説明文実業家級サラリーマンの説明文実業家級サラリーマンの説明文実業家級サラリーマンの説明文実業家級サラリーマンの説明文実業家級サラリーマンの説明文
						</div>
						<div id="againButton"></div>
					</div>
					<div id="resultImage"></div> 
				</div>
			</div>
        
  </div>
  </div>


  

  
</body>
</html>